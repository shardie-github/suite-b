<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Suite B — Reports</title>
<style>
:root{--bg:#0b1220;--card:#0f182b;--fg:#e9eefb;--acc:#5b8cff;--b:#1a2642}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui}
.wrap{max-width:1100px;margin:0 auto;padding:24px}
h1{margin:0 0 12px} .bar{display:flex;gap:8px;flex-wrap:wrap}
input,button,a.badge{padding:10px;border-radius:10px;border:1px solid var(--b);background:#0f182b;color:#e9eefb}
button{background:var(--acc);border:none;cursor:pointer}
.card{background:var(--card);border:1px solid var(--b);border-radius:12px;padding:16px;margin-top:16px}
table{width:100%;border-collapse:collapse}th,td{border-bottom:1px solid var(--b);padding:10px;text-align:left}
a.badge{text-decoration:none;display:inline-block}
@media(max-width:640px){.bar{flex-direction:column}}
</style></head>
<body>
<div class="wrap" role="main" aria-label="Reports">
  <h1>Suite B — Reports</h1>
  <div class="bar" role="region" aria-label="Filters">
    <label>Tenant <input id="tenant" placeholder="default"></label>
    <label>API key <input id="key" placeholder="paste key"></label>
    <label>From <input id="from" type="date"></label>
    <label>To <input id="to" type="date"></label>
    <button id="go">Run</button>
    <a id="csv" class="badge" href="#" target="_blank">CSV</a>
    <a class="badge" href="/admin" aria-label="Admin">Admin</a>
  </div>
  <div class="card" aria-live="polite">
    <table><thead><tr><th>ID</th><th>Date</th><th>Type</th><th>Status</th><th>Email</th></tr></thead><tbody id="rows"><tr><td colspan="5">Loading…</td></tr></tbody></table>
  </div>
</div>
<script>
async function run(){
  const t = document.getElementById('tenant').value||'default';
  const k = document.getElementById('key').value||'';
  const f = document.getElementById('from').value||'2025-01-01';
  const to = document.getElementById('to').value||'2025-12-31';
  const headers = k? {'x-api-key':k,'x-tenant-id':t} : {};
  const r = await fetch(`/api/reports?from=${f}&to=${to}`, {headers});
  const j = await r.json().catch(()=>({rows:[]}));
  document.getElementById('rows').innerHTML = (j.rows||[]).map(x=>`<tr><td>${x.id}</td><td>${x.date}</td><td>${x.type}</td><td>${x.status}</td><td>${x.email||""}</td></tr>`).join('') || '<tr><td colspan="5">No rows.</td></tr>';
  document.getElementById('csv').href = `/api/reports.csv?from=${f}&to=${to}`;
}
document.getElementById('go').onclick = run; run();
</script>
</body></html>
